{"ast":null,"code":"import _slicedToArray from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import*as firebase from\"firebase\";var Edit=function Edit(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];useEffect(function(){setTitle(props.title);setData(JSON.stringify(props.data));});var onEdit=function onEdit(e){e.preventDefault();var uid=JSON.parse(localStorage.getItem('logInfo')).user.uid;var database=firebase.database();var time=new Date();var date=\"\".concat(time.getFullYear(),\"\\uB144 \").concat(time.getMonth()+1,\"\\uC6D4 \").concat(time.getDate(),\"\\uC77C \").concat(time.getHours(),\":\").concat(time.getMinutes(),\":\").concat(time.getSeconds());database.ref(\"mandal/\".concat(uid)).once('value',function(snapshot){var obj=snapshot.val();var keyList=[];//키값 찾기\nfor(var key in obj){if(obj.hasOwnProperty(key)){keyList.push(key);// console.log(key);\n}}// console.log(props.pageNo);\ndatabase.ref(\"mandal/\".concat(uid,\"/\").concat(keyList[props.pageNo])).update({title:title,data:data,time:date});});setTimeout(function(){window.history.go(0);},1000);};return React.createElement(\"button\",{className:\"btn edit\",onClick:onEdit},\"\\uC218\\uC815\");};export default Edit;","map":{"version":3,"sources":["/Users/joohye/mandal-art/src/components/mandal/button/Edit.js"],"names":["React","useState","useEffect","firebase","Edit","props","title","setTitle","data","setData","JSON","stringify","onEdit","e","preventDefault","uid","parse","localStorage","getItem","user","database","time","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","ref","once","snapshot","obj","val","keyList","key","hasOwnProperty","push","pageNo","update","setTimeout","window","history","go"],"mappings":"2GAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,UAA1B,CAEA,GAAMC,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,CAACC,KAAD,CAAS,eAEOJ,QAAQ,EAFf,wCAETK,KAFS,eAEHC,QAFG,8BAGKN,QAAQ,EAHb,yCAGTO,IAHS,eAGJC,OAHI,eAMhBP,SAAS,CAAC,UAAI,CACVK,QAAQ,CAACF,KAAK,CAACC,KAAP,CAAR,CACAG,OAAO,CAACC,IAAI,CAACC,SAAL,CAAeN,KAAK,CAACG,IAArB,CAAD,CAAP,CACH,CAHQ,CAAT,CAKA,GAAMI,CAAAA,MAAM,CAAC,QAAPA,CAAAA,MAAO,CAACC,CAAD,CAAK,CACdA,CAAC,CAACC,cAAF,GAEA,GAAMC,CAAAA,GAAG,CAAGL,IAAI,CAACM,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,IAA5C,CAAiDJ,GAA7D,CACA,GAAMK,CAAAA,QAAQ,CAAGjB,QAAQ,CAACiB,QAAT,EAAjB,CAEA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,EAAX,CACA,GAAIC,CAAAA,IAAI,WAAMF,IAAI,CAACG,WAAL,EAAN,mBAA6BH,IAAI,CAACI,QAAL,GAAkB,CAA/C,mBAAqDJ,IAAI,CAACK,OAAL,EAArD,mBAAwEL,IAAI,CAACM,QAAL,EAAxE,aAA2FN,IAAI,CAACO,UAAL,EAA3F,aAAgHP,IAAI,CAACQ,UAAL,EAAhH,CAAR,CAEAT,QAAQ,CAACU,GAAT,kBAAuBf,GAAvB,GAA8BgB,IAA9B,CAAmC,OAAnC,CAA4C,SAACC,QAAD,CAAc,CACtD,GAAIC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,GAAT,EAAV,CACA,GAAIC,CAAAA,OAAO,CAAG,EAAd,CAEA;AACA,IAAK,GAAIC,CAAAA,GAAT,GAAgBH,CAAAA,GAAhB,CAAqB,CACjB,GAAIA,GAAG,CAACI,cAAJ,CAAmBD,GAAnB,CAAJ,CAA6B,CACzBD,OAAO,CAACG,IAAR,CAAaF,GAAb,EACA;AACH,CACJ,CACD;AACAhB,QAAQ,CAACU,GAAT,kBAAuBf,GAAvB,aAA8BoB,OAAO,CAAC9B,KAAK,CAACkC,MAAP,CAArC,GAAuDC,MAAvD,CAA8D,CAC1DlC,KAAK,CAACA,KADoD,CAE1DE,IAAI,CAAEA,IAFoD,CAG1Da,IAAI,CAAEE,IAHoD,CAA9D,EAKH,CAjBD,EAkBAkB,UAAU,CAAC,UAAI,CACXC,MAAM,CAACC,OAAP,CAAeC,EAAf,CAAkB,CAAlB,EACH,CAFS,CAER,IAFQ,CAAV,CAGH,CA9BD,CAgCA,MACI,+BAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAEhC,MAAtC,iBADJ,CAIH,CA/CD,CAiDA,cAAeR,CAAAA,IAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport * as firebase from \"firebase\";\n\nconst Edit=(props)=>{\n\n    const [title,setTitle]=useState();\n    const [data,setData]=useState();\n\n\n    useEffect(()=>{\n        setTitle(props.title);\n        setData(JSON.stringify(props.data));\n    });\n\n    const onEdit=(e)=>{\n        e.preventDefault();\n\n        const uid = JSON.parse(localStorage.getItem('logInfo')).user.uid;\n        const database = firebase.database();\n\n        let time = new Date();\n        let date = `${time.getFullYear()}년 ${time.getMonth() + 1}월 ${time.getDate()}일 ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n\n        database.ref(`mandal/${uid}`).once('value', (snapshot) => {\n            let obj = snapshot.val();\n            let keyList = [];\n\n            //키값 찾기\n            for (let key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    keyList.push(key);\n                    // console.log(key);\n                }\n            }\n            // console.log(props.pageNo);\n            database.ref(`mandal/${uid}/${keyList[props.pageNo]}`).update({\n                title:title,\n                data: data,\n                time: date\n            });\n        });\n        setTimeout(()=>{\n            window.history.go(0);\n        },1000);\n    }\n\n    return(\n        <button className=\"btn edit\" onClick={onEdit}>수정</button>\n    );\n\n}\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}