{"ast":null,"code":"import _classCallCheck from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import*as firebase from\"firebase\";import{connect}from'react-redux';import*as actions from'../../redux/actions/index';var Sign=/*#__PURE__*/function(_Component){_inherits(Sign,_Component);function Sign(props){var _this;_classCallCheck(this,Sign);_this=_possibleConstructorReturn(this,_getPrototypeOf(Sign).call(this,props));_this.onLogin=function(e){// const {dispatchLogin}=this.props;\ne.preventDefault();firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){var provider=new firebase.auth.GoogleAuthProvider();return firebase.auth().signInWithPopup(provider).then(function(authData){_this.setState({user:authData});// dispatchLogin();\n// this.props.history.push('/');\n});}).catch(function(error){console.log(error);});};_this.onLogout=function(e){// const {dispatchLogout}=this.props;\ne.preventDefault();firebase.auth().signOut().then(function(){_this.setState({user:null});// dispatchLogout();\n// this.props.history.push('/');\n}).catch(function(error){console.log(error);});};_this.state={user:localStorage.getItem('logInfo')};return _this;}_createClass(Sign,[{key:\"componentWillUpdate\",value:function componentWillUpdate(nextProps,nextState,nextContext){localStorage.setItem('logInfo',JSON.stringify(nextState.user));}},{key:\"render\",value:function render(){// const { user } = this.props;\nreturn React.createElement(\"section\",null,this.state.user?React.createElement(\"button\",{onClick:this.onLogout},\"\\uB85C\\uADF8\\uC544\\uC6C3\"):React.createElement(\"button\",{onClick:this.onLogin},\"\\uB85C\\uADF8\\uC778\"));}}]);return Sign;}(Component);export default Sign;// export default connect(\n//     state => ({ user: state.user }),\n//     dispatch=>({\n//         dispatchLogin:()=>{dispatch(actions.login)},\n//         dispatchLogout:()=>{dispatch(actions.logout)}\n//     })\n// )(Sign);","map":{"version":3,"sources":["/Users/joohye/mandal-art/src/components/auth/Sign.js"],"names":["React","Component","firebase","connect","actions","Sign","props","onLogin","e","preventDefault","auth","setPersistence","Auth","Persistence","LOCAL","then","provider","GoogleAuthProvider","signInWithPopup","authData","setState","user","catch","error","console","log","onLogout","signOut","state","localStorage","getItem","nextProps","nextState","nextContext","setItem","JSON","stringify"],"mappings":"qiBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,UAA1B,CAEA,OAAQC,OAAR,KAAsB,aAAtB,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,2BAAzB,C,GAEMC,CAAAA,I,8DACF,cAAYC,KAAZ,CAAmB,sCACf,sEAAMA,KAAN,GADe,MAWnBC,OAXmB,CAWT,SAACC,CAAD,CAAO,CACb;AAEAA,CAAC,CAACC,cAAF,GACAP,QAAQ,CAACQ,IAAT,GAAgBC,cAAhB,CAA+BT,QAAQ,CAACQ,IAAT,CAAcE,IAAd,CAAmBC,WAAnB,CAA+BC,KAA9D,EACKC,IADL,CACU,UAAM,CACR,GAAIC,CAAAA,QAAQ,CAAG,GAAId,CAAAA,QAAQ,CAACQ,IAAT,CAAcO,kBAAlB,EAAf,CACA,MAAOf,CAAAA,QAAQ,CAACQ,IAAT,GAAgBQ,eAAhB,CAAgCF,QAAhC,EACFD,IADE,CACG,SAACI,QAAD,CAAc,CAChB,MAAKC,QAAL,CAAc,CACVC,IAAI,CAACF,QADK,CAAd,EAGA;AAEA;AACH,CARE,CAAP,CASH,CAZL,EAaKG,KAbL,CAaW,SAACC,KAAD,CAAW,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAfL,EAiBH,CAhCkB,OAkCnBG,QAlCmB,CAkCR,SAAClB,CAAD,CAAO,CACd;AACAA,CAAC,CAACC,cAAF,GAEAP,QAAQ,CAACQ,IAAT,GAAgBiB,OAAhB,GAA0BZ,IAA1B,CAA+B,UAAM,CACjC,MAAKK,QAAL,CAAc,CACVC,IAAI,CAAC,IADK,CAAd,EAGA;AAEA;AAEH,CARD,EAQGC,KARH,CAQS,SAAUC,KAAV,CAAiB,CACtBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAVD,EAYH,CAlDkB,CAEf,MAAKK,KAAL,CAAY,CACRP,IAAI,CAAEQ,YAAY,CAACC,OAAb,CAAqB,SAArB,CADE,CAAZ,CAFe,aAKlB,C,iFAEmBC,S,CAAWC,S,CAAWC,W,CAAa,CACnDJ,YAAY,CAACK,OAAb,CAAqB,SAArB,CAAgCC,IAAI,CAACC,SAAL,CAAeJ,SAAS,CAACX,IAAzB,CAAhC,EACH,C,uCA2CQ,CACL;AACA,MACI,oCAEQ,KAAKO,KAAL,CAAWP,IAAX,CACC,8BAAQ,OAAO,CAAE,KAAKK,QAAtB,6BADD,CAEC,8BAAQ,OAAO,CAAE,KAAKnB,OAAtB,uBAJT,CADJ,CAUH,C,kBAjEcN,S,EAsEnB,cAAeI,CAAAA,IAAf,CACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, {Component} from 'react';\nimport * as firebase from \"firebase\";\n\nimport {connect} from 'react-redux';\nimport * as actions from '../../redux/actions/index';\n\nclass Sign extends Component {\n    constructor(props) {\n        super(props);\n        this.state= {\n            user: localStorage.getItem('logInfo')\n        };\n    }\n\n    componentWillUpdate(nextProps, nextState, nextContext) {\n        localStorage.setItem('logInfo', JSON.stringify(nextState.user));\n    }\n\n    onLogin = (e) => {\n        // const {dispatchLogin}=this.props;\n\n        e.preventDefault();\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n            .then(() => {\n                var provider = new firebase.auth.GoogleAuthProvider();\n                return firebase.auth().signInWithPopup(provider)\n                    .then((authData) => {\n                        this.setState({\n                            user:authData\n                        });\n                        // dispatchLogin();\n\n                        // this.props.history.push('/');\n                    });\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n\n    }\n\n    onLogout = (e) => {\n        // const {dispatchLogout}=this.props;\n        e.preventDefault();\n\n        firebase.auth().signOut().then(() => {\n            this.setState({\n                user:null\n            });\n            // dispatchLogout();\n\n            // this.props.history.push('/');\n\n        }).catch(function (error) {\n            console.log(error);\n        });\n\n    }\n\n    render() {\n        // const { user } = this.props;\n        return (\n            <section>\n                {\n                    this.state.user ?\n                    (<button onClick={this.onLogout}>로그아웃</button>) :\n                    (<button onClick={this.onLogin}>로그인</button>)\n\n                }\n            </section>\n        );\n    }\n\n}\n\n\nexport default Sign;\n// export default connect(\n//     state => ({ user: state.user }),\n//     dispatch=>({\n//         dispatchLogin:()=>{dispatch(actions.login)},\n//         dispatchLogout:()=>{dispatch(actions.logout)}\n//     })\n// )(Sign);\n"]},"metadata":{},"sourceType":"module"}