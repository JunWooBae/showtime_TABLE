{"ast":null,"code":"import _slicedToArray from \"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/joohye/mandal-art/src/components/mandal/button/Edit.js\";\nimport React, { useState, useEffect } from 'react';\nimport * as firebase from \"firebase\";\n\nconst Edit = data => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        mandalData = _useState2[0],\n        setMandalData = _useState2[1];\n\n  useEffect(() => {\n    setMandalData(JSON.stringify(data.data));\n  });\n\n  const onEdit = () => {\n    const uid = JSON.parse(localStorage.getItem('logInfo')).user.uid;\n    let database = firebase.database();\n    let time = new Date();\n    let date = `${time.getFullYear()}년 ${time.getMonth() + 1}월 ${time.getDate()}일 ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n    database.ref(`mandal/${uid}`).once('value', snapshot => {\n      const obj = snapshot.val();\n      const keyList = []; //키값 찾기\n\n      for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          keyList.push(key); // console.log(key);\n        }\n      } // console.log(keyList);\n\n\n      database.ref(`mandal/${uid}/${keyList[this.props.match.params.id]}`).update({\n        data: JSON.stringify(this.state.data),\n        time: date\n      });\n    });\n  };\n\n  return React.createElement(\"button\", {\n    onClick: onEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"\\uC218\\uC815\");\n};\n\nexport default Edit;","map":{"version":3,"sources":["/Users/joohye/mandal-art/src/components/mandal/button/Edit.js"],"names":["React","useState","useEffect","firebase","Edit","data","mandalData","setMandalData","JSON","stringify","onEdit","uid","parse","localStorage","getItem","user","database","time","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","ref","once","snapshot","obj","val","keyList","key","hasOwnProperty","push","props","match","params","id","update","state"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;AAEA,MAAMC,IAAI,GAAEC,IAAD,IAAQ;AAAA,oBAEkBJ,QAAQ,EAF1B;AAAA;AAAA,QAERK,UAFQ;AAAA,QAEGC,aAFH;;AAIfL,EAAAA,SAAS,CAAC,MAAI;AACVK,IAAAA,aAAa,CAACC,IAAI,CAACC,SAAL,CAAeJ,IAAI,CAACA,IAApB,CAAD,CAAb;AACH,GAFQ,CAAT;;AAIA,QAAMK,MAAM,GAAC,MAAI;AACb,UAAMC,GAAG,GAAGH,IAAI,CAACI,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,IAA5C,CAAiDJ,GAA7D;AACA,QAAIK,QAAQ,GAAGb,QAAQ,CAACa,QAAT,EAAf;AAEA,QAAIC,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACA,QAAIC,IAAI,GAAI,GAAEF,IAAI,CAACG,WAAL,EAAmB,KAAIH,IAAI,CAACI,QAAL,KAAkB,CAAE,KAAIJ,IAAI,CAACK,OAAL,EAAe,KAAIL,IAAI,CAACM,QAAL,EAAgB,IAAGN,IAAI,CAACO,UAAL,EAAkB,IAAGP,IAAI,CAACQ,UAAL,EAAkB,EAA1I;AAEAT,IAAAA,QAAQ,CAACU,GAAT,CAAc,UAASf,GAAI,EAA3B,EAA8BgB,IAA9B,CAAmC,OAAnC,EAA6CC,QAAD,IAAc;AACtD,YAAMC,GAAG,GAAGD,QAAQ,CAACE,GAAT,EAAZ;AACA,YAAMC,OAAO,GAAG,EAAhB,CAFsD,CAItD;;AACA,WAAK,IAAIC,GAAT,IAAgBH,GAAhB,EAAqB;AACjB,YAAIA,GAAG,CAACI,cAAJ,CAAmBD,GAAnB,CAAJ,EAA6B;AACzBD,UAAAA,OAAO,CAACG,IAAR,CAAaF,GAAb,EADyB,CAEzB;AACH;AACJ,OAVqD,CAWtD;;;AACAhB,MAAAA,QAAQ,CAACU,GAAT,CAAc,UAASf,GAAI,IAAGoB,OAAO,CAAC,KAAKI,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,CAA6B,EAAlE,EAAqEC,MAArE,CAA4E;AACxElC,QAAAA,IAAI,EAAEG,IAAI,CAACC,SAAL,CAAe,KAAK+B,KAAL,CAAWnC,IAA1B,CADkE;AAExEY,QAAAA,IAAI,EAAEE;AAFkE,OAA5E;AAIH,KAhBD;AAiBH,GAxBD;;AAyBA,SACI;AAAQ,IAAA,OAAO,EAAET,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ;AAIH,CArCD;;AAuCA,eAAeN,IAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport * as firebase from \"firebase\";\n\nconst Edit=(data)=>{\n\n    const [mandalData,setMandalData]=useState();\n    \n    useEffect(()=>{\n        setMandalData(JSON.stringify(data.data));\n    });\n\n    const onEdit=()=>{\n        const uid = JSON.parse(localStorage.getItem('logInfo')).user.uid;\n        let database = firebase.database();\n\n        let time = new Date();\n        let date = `${time.getFullYear()}년 ${time.getMonth() + 1}월 ${time.getDate()}일 ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n\n        database.ref(`mandal/${uid}`).once('value', (snapshot) => {\n            const obj = snapshot.val();\n            const keyList = [];\n\n            //키값 찾기\n            for (let key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    keyList.push(key);\n                    // console.log(key);\n                }\n            }\n            // console.log(keyList);\n            database.ref(`mandal/${uid}/${keyList[this.props.match.params.id]}`).update({\n                data: JSON.stringify(this.state.data),\n                time: date\n            });\n        });\n    }\n    return(\n        <button onClick={onEdit}>수정</button>\n    );\n\n}\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}