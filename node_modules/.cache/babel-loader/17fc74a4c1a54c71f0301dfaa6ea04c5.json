{"ast":null,"code":"import _slicedToArray from \"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/joohye/mandal-art/src/components/mandal/button/Edit.js\";\nimport React, { useState, useEffect } from 'react';\nimport * as firebase from \"firebase\";\n\nconst Edit = props => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        mandalData = _useState2[0],\n        setMandalData = _useState2[1];\n\n  useEffect(() => {\n    setMandalData(JSON.stringify(props.data));\n  });\n\n  const onEdit = e => {\n    e.preventDefault();\n    const uid = JSON.parse(localStorage.getItem('logInfo')).user.uid;\n    const database = firebase.database();\n    let time = new Date();\n    let date = `${time.getFullYear()}년 ${time.getMonth() + 1}월 ${time.getDate()}일 ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n    database.ref(`mandal/${uid}`).once('value', snapshot => {\n      let obj = snapshot.val();\n      let keyList = []; //키값 찾기\n\n      for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          keyList.push(key); // console.log(key);\n        }\n      } // console.log(props.pageNo);\n\n\n      database.ref(`mandal/${uid}/${keyList[props.pageData]}`).update({\n        data: mandalData,\n        time: date\n      });\n    });\n  };\n\n  return React.createElement(\"button\", {\n    onClick: onEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"\\uC218\\uC815\");\n};\n\nexport default Edit;","map":{"version":3,"sources":["/Users/joohye/mandal-art/src/components/mandal/button/Edit.js"],"names":["React","useState","useEffect","firebase","Edit","props","mandalData","setMandalData","JSON","stringify","data","onEdit","e","preventDefault","uid","parse","localStorage","getItem","user","database","time","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","ref","once","snapshot","obj","val","keyList","key","hasOwnProperty","push","pageData","update"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;AAEA,MAAMC,IAAI,GAAEC,KAAD,IAAS;AAAA,oBAEiBJ,QAAQ,EAFzB;AAAA;AAAA,QAETK,UAFS;AAAA,QAEEC,aAFF;;AAIhBL,EAAAA,SAAS,CAAC,MAAI;AACVK,IAAAA,aAAa,CAACC,IAAI,CAACC,SAAL,CAAeJ,KAAK,CAACK,IAArB,CAAD,CAAb;AACH,GAFQ,CAAT;;AAIA,QAAMC,MAAM,GAAEC,CAAD,IAAK;AACdA,IAAAA,CAAC,CAACC,cAAF;AAEA,UAAMC,GAAG,GAAGN,IAAI,CAACO,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,IAA5C,CAAiDJ,GAA7D;AACA,UAAMK,QAAQ,GAAGhB,QAAQ,CAACgB,QAAT,EAAjB;AAEA,QAAIC,IAAI,GAAG,IAAIC,IAAJ,EAAX;AACA,QAAIC,IAAI,GAAI,GAAEF,IAAI,CAACG,WAAL,EAAmB,KAAIH,IAAI,CAACI,QAAL,KAAkB,CAAE,KAAIJ,IAAI,CAACK,OAAL,EAAe,KAAIL,IAAI,CAACM,QAAL,EAAgB,IAAGN,IAAI,CAACO,UAAL,EAAkB,IAAGP,IAAI,CAACQ,UAAL,EAAkB,EAA1I;AAEAT,IAAAA,QAAQ,CAACU,GAAT,CAAc,UAASf,GAAI,EAA3B,EAA8BgB,IAA9B,CAAmC,OAAnC,EAA6CC,QAAD,IAAc;AACtD,UAAIC,GAAG,GAAGD,QAAQ,CAACE,GAAT,EAAV;AACA,UAAIC,OAAO,GAAG,EAAd,CAFsD,CAItD;;AACA,WAAK,IAAIC,GAAT,IAAgBH,GAAhB,EAAqB;AACjB,YAAIA,GAAG,CAACI,cAAJ,CAAmBD,GAAnB,CAAJ,EAA6B;AACzBD,UAAAA,OAAO,CAACG,IAAR,CAAaF,GAAb,EADyB,CAEzB;AACH;AACJ,OAVqD,CAWtD;;;AACAhB,MAAAA,QAAQ,CAACU,GAAT,CAAc,UAASf,GAAI,IAAGoB,OAAO,CAAC7B,KAAK,CAACiC,QAAP,CAAiB,EAAtD,EAAyDC,MAAzD,CAAgE;AAC5D7B,QAAAA,IAAI,EAAEJ,UADsD;AAE5Dc,QAAAA,IAAI,EAAEE;AAFsD,OAAhE;AAIH,KAhBD;AAiBH,GA1BD;;AA4BA,SACI;AAAQ,IAAA,OAAO,EAAEX,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ;AAIH,CAxCD;;AA0CA,eAAeP,IAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport * as firebase from \"firebase\";\n\nconst Edit=(props)=>{\n\n    const [mandalData,setMandalData]=useState();\n\n    useEffect(()=>{\n        setMandalData(JSON.stringify(props.data));\n    });\n\n    const onEdit=(e)=>{\n        e.preventDefault();\n\n        const uid = JSON.parse(localStorage.getItem('logInfo')).user.uid;\n        const database = firebase.database();\n\n        let time = new Date();\n        let date = `${time.getFullYear()}년 ${time.getMonth() + 1}월 ${time.getDate()}일 ${time.getHours()}:${time.getMinutes()}:${time.getSeconds()}`;\n\n        database.ref(`mandal/${uid}`).once('value', (snapshot) => {\n            let obj = snapshot.val();\n            let keyList = [];\n\n            //키값 찾기\n            for (let key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    keyList.push(key);\n                    // console.log(key);\n                }\n            }\n            // console.log(props.pageNo);\n            database.ref(`mandal/${uid}/${keyList[props.pageData]}`).update({\n                data: mandalData,\n                time: date\n            });\n        });\n    }\n\n    return(\n        <button onClick={onEdit}>수정</button>\n    );\n\n}\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}