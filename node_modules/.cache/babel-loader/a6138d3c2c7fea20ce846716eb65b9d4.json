{"ast":null,"code":"import _objectSpread from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/joohye/mandal-art/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import ReactDOM from'react-dom';import{Link}from'react-router-dom';import*as firebase from\"firebase\";import Nav from'./Nav';var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);function Header(props){var _this;_classCallCheck(this,Header);_this=_possibleConstructorReturn(this,_getPrototypeOf(Header).call(this,props));_this.onScroll=function(e){// 스크롤 할때마다 state에 scroll한 만큼 scrollTop 값 증가하므로 이를 업데이트해줌,\n//따라서 스크롤 시점에 따라 특정액션을 추후에 state를 활용하여 구현 가능\nvar scrollTop=('scroll',e.srcElement.scrollingElement.scrollTop);_this.setState(_objectSpread({},_this.state,{scroll:scrollTop}));};_this.onLogin=function(e){e.preventDefault();firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(function(){var provider=new firebase.auth.GoogleAuthProvider();return firebase.auth().signInWithPopup(provider).then(function(authData){_this.setState({user:authData});});}).catch(function(error){console.log(error);});};_this.onLogout=function(e){e.preventDefault();firebase.auth().signOut().then(function(){_this.setState({user:null});}).catch(function(error){console.log(error);});window.location.href='/';};_this.onNav=function(){_this.setState(function(prevState){return{isNav:!prevState.isNav};});};_this.state={user:localStorage.getItem('logInfo'),isNav:false,scroll:0,bgColor:''};return _this;}_createClass(Header,[{key:\"componentDidMount\",value:function componentDidMount(){// 스크롤 이벤트 적용\nwindow.addEventListener('scroll',this.onScroll);}},{key:\"componentWillUpdate\",value:function componentWillUpdate(nextProps,nextState,nextContext){if(nextState.user){localStorage.setItem('logInfo',JSON.stringify(nextState.user));}else{localStorage.removeItem('logInfo');}}},{key:\"render\",value:function render(){var userInfo=JSON.parse(localStorage.getItem('logInfo'));var nav;if(this.state.isNav){nav=React.createElement(Nav,{userInfo:userInfo.user});}return React.createElement(\"section\",{className:\"header-section \".concat(this.state.scroll>900?'bg-blue':'')},React.createElement(\"div\",{className:\"header-container flex justify-center justify-between items-center\"},React.createElement(Link,{className:\"flex justify-center items-center\",to:\"/\"},React.createElement(\"img\",{className:\"header-icon mr-10\",src:require(\"../../images/icon/puzzle.svg\")}),React.createElement(\"div\",{className:\"header-name\"},React.createElement(\"span\",{className:\"blue\"},\"M\"),\"andal-\",React.createElement(\"span\",{className:\"yellow\"},\"A\"),\"RT\")),React.createElement(\"div\",null,userInfo?React.createElement(React.Fragment,null,React.createElement(\"img\",{className:\"cursor-pointer profile-img\",src:userInfo.user.photoURL}),React.createElement(\"span\",{className:\"cursor-pointer\",onClick:this.onLogout},\"\\uB85C\\uADF8\\uC544\\uC6C3\")):React.createElement(\"span\",{className:\"cursor-pointer\",onClick:this.onLogin},\"\\uB85C\\uADF8\\uC778\"))));}}]);return Header;}(Component);export default Header;","map":{"version":3,"sources":["/Users/joohye/mandal-art/src/components/header/Header.js"],"names":["React","Component","ReactDOM","Link","firebase","Nav","Header","props","onScroll","e","scrollTop","srcElement","scrollingElement","setState","state","scroll","onLogin","preventDefault","auth","setPersistence","Auth","Persistence","LOCAL","then","provider","GoogleAuthProvider","signInWithPopup","authData","user","catch","error","console","log","onLogout","signOut","window","location","href","onNav","prevState","isNav","localStorage","getItem","bgColor","addEventListener","nextProps","nextState","nextContext","setItem","JSON","stringify","removeItem","userInfo","parse","nav","require","photoURL"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport {Link} from 'react-router-dom';\nimport * as firebase from \"firebase\";\n\nimport Nav from './Nav';\n\n\nclass Header extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            user: localStorage.getItem('logInfo'),\n            isNav: false,\n            scroll: 0,\n            bgColor:''\n        }\n    }\n\n    componentDidMount() {\n        // 스크롤 이벤트 적용\n        window.addEventListener('scroll', this.onScroll);\n    }\n\n    onScroll = (e) => {\n        // 스크롤 할때마다 state에 scroll한 만큼 scrollTop 값 증가하므로 이를 업데이트해줌,\n        //따라서 스크롤 시점에 따라 특정액션을 추후에 state를 활용하여 구현 가능\n        const scrollTop = ('scroll', e.srcElement.scrollingElement.scrollTop);\n\n        this.setState({\n            ...this.state,\n            scroll:scrollTop\n        });\n    }\n\n    componentWillUpdate(nextProps, nextState, nextContext) {\n        if (nextState.user) {\n            localStorage.setItem('logInfo', JSON.stringify(nextState.user));\n        } else {\n            localStorage.removeItem('logInfo');\n        }\n    }\n\n    onLogin = (e) => {\n        e.preventDefault();\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\n            var provider = new firebase.auth.GoogleAuthProvider();\n            return firebase.auth().signInWithPopup(provider).then((authData) => {\n                this.setState({\n                    user: authData\n                });\n            });\n        }).catch((error) => {\n            console.log(error);\n        });\n    }\n\n\n    onLogout = (e) => {\n        e.preventDefault();\n\n        firebase.auth().signOut().then(() => {\n            this.setState({\n                user: null\n            });\n        }).catch(function (error) {\n            console.log(error);\n        });\n        window.location.href = '/';\n    }\n\n    onNav = () => {\n        this.setState((prevState) => {\n            return {\n                isNav: !prevState.isNav\n            }\n        });\n    }\n\n\n    render() {\n        let userInfo = JSON.parse(localStorage.getItem('logInfo'));\n        let nav;\n\n        if (this.state.isNav) {\n            nav = <Nav userInfo={userInfo.user}></Nav>;\n        }\n\n        return (\n            <section className={`header-section ${(this.state.scroll>900)?'bg-blue':''}`}>\n                <div className=\"header-container flex justify-center justify-between items-center\">\n                    <Link className=\"flex justify-center items-center\" to=\"/\">\n                        <img className=\"header-icon mr-10\" src={require(\"../../images/icon/puzzle.svg\")}/>\n                        <div className=\"header-name\"><span className=\"blue\">M</span>andal-<span\n                            className=\"yellow\">A</span>RT\n                        </div>\n                    </Link>\n                    <div>\n                        {\n                            userInfo ?\n                                <>\n                                    <img className=\"cursor-pointer profile-img\" src={userInfo.user.photoURL}/>\n                                    <span className=\"cursor-pointer\" onClick={this.onLogout}>로그아웃</span>\n\n                                    {/*<Nav userInfo={userInfo.user}/>*/}\n                                </>\n                                : <span className=\"cursor-pointer\" onClick={this.onLogin}>로그인</span>\n                        }\n\n                    </div>\n                </div>\n            </section>\n        )\n    }\n}\n\nexport default Header;"]},"metadata":{},"sourceType":"module"}